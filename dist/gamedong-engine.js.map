{"version":3,"file":"gamedong-engine.js","mappings":"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CAAP;AACH;;;;EAxDiBxK;;AA2DtBtJ,MAAM,CAACC,OAAP,GAAiB4T,OAAjB;;;;;;;;;;AC/DA7T,6FAAA;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,sBAAsB;AACxC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;;AAEA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8DAA8D,YAAY;AAC1E;AACA,8DAA8D,YAAY;AAC1E;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UChfA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://GameDong/webpack/universalModuleDefinition","webpack://GameDong/./autoload/index.js","webpack://GameDong/./src/app/assets.loader.js","webpack://GameDong/./src/app/class.loader.js","webpack://GameDong/./src/app/index.js","webpack://GameDong/./src/app/main.js","webpack://GameDong/./src/camera/index.js","webpack://GameDong/./src/core/assets/asset.service.js","webpack://GameDong/./src/core/assets/index.js","webpack://GameDong/./src/core/canvas/canvas.model.js","webpack://GameDong/./src/core/canvas/index.js","webpack://GameDong/./src/core/components/POOL.model.js","webpack://GameDong/./src/core/controllers/mouse.controller.js","webpack://GameDong/./src/core/coords/coords.model.js","webpack://GameDong/./src/core/coords/coords2D.model.js","webpack://GameDong/./src/core/coords/coords3D.model.js","webpack://GameDong/./src/core/coords/index.js","webpack://GameDong/./src/core/entity/entity.model.config.js","webpack://GameDong/./src/core/entity/entity.model.js","webpack://GameDong/./src/core/entity/index.js","webpack://GameDong/./src/core/game-element/game-element.model.js","webpack://GameDong/./src/core/game-element/index.js","webpack://GameDong/./src/core/notification/index.js","webpack://GameDong/./src/core/notification/notification.POOL.js","webpack://GameDong/./src/core/notification/notification.model.js","webpack://GameDong/./src/core/viewport/index.js","webpack://GameDong/./src/core/viewport/viewport.model.js","webpack://GameDong/./src/core/viewport/viewport.mouse.controller.js","webpack://GameDong/./src/map/index.js","webpack://GameDong/./src/map/map.model.js","webpack://GameDong/./src/map/tile-map.model.js","webpack://GameDong/./src/tileset/Tile.model.js","webpack://GameDong/./src/tileset/Tileset.config.js","webpack://GameDong/./src/tileset/Tileset.model.js","webpack://GameDong/./src/tileset/index.js","webpack://GameDong/./node_modules/events/events.js","webpack://GameDong/webpack/bootstrap","webpack://GameDong/webpack/before-startup","webpack://GameDong/webpack/startup","webpack://GameDong/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"GameDong\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GameDong\"] = factory();\n\telse\n\t\troot[\"GameDong\"] = factory();\n})(self, function() {\nreturn ","/** Generated from cli **/\r\nmodule.exports = GameDong => {\r\n    const prefix = '.';\r\n    // require(prefix + '/grass.tileset.loader.js')(GameDong);\r\n    // require(prefix + '/sample-1.tileset.loader.js')(GameDong);\r\n\r\n};\r\n","module.exports = (GameDong) => {\r\n    const AssetManager = GameDong.AssetManager;\r\n    AssetManager.store('tile', require('@assets/tiles/tile.png'));\r\n    AssetManager.store('a', require('@assets/tiles/a.png'));\r\n    AssetManager.store('b', require('@assets/tiles/b.png'));\r\n};","module.exports = (app) => {\r\n    app.AssetManager = require('@core/assets');\r\n    app.Map = require('../map');\r\n    app.TileMap = require('../map/tile-map.model');\r\n    app.TileSet = require('../tileset');\r\n    app.Camera = require('../camera');\r\n    app.Coords = require('@core/coords');\r\n    app.ViewPort = require('@core/viewport');\r\n    app.GameElement = require('@core/game-element');\r\n    app.MouseController = require('@core/controllers/mouse.controller');\r\n    app.Canvas = require('@core/canvas');\r\n};\r\n","module.exports = require('./main');","const app = {};\r\n\r\ntry {\r\n    require('./class.loader')(app);\r\n    require('@autoload')(app);\r\n    require('./assets.loader')(app);\r\n   \r\n}\r\n\r\ncatch(error) {\r\n    console.error(error);\r\n}\r\n\r\nfinally {\r\n    window.GameDong = app;\r\n}\r\n\r\nmodule.exports  = app;","const GameElement = require('@core/game-element');\r\nconst Coords = require('@core/coords');\r\n\r\nclass Camera extends GameElement {\r\n    constructor(settings) {\r\n        super(settings);\r\n        \r\n        this.radius = settings.radius || 10;\r\n        // this.data.position = settings.coords || Coords._2D.getOne();\r\n    }\r\n\r\n    setScene(scene) {\r\n        this.data.scene = scene;\r\n    }\r\n\r\n    getScene() {\r\n        return this.data.scene;\r\n    }\r\n\r\n    snapshot(viewport) {\r\n        // means render\r\n\r\n        const resolution = viewport.getResolution();\r\n        const size = viewport.getSize();\r\n        const context = viewport.getContext();\r\n        const rx = resolution.width;\r\n        const ry = resolution.height;\r\n        // const vw = size.width;\r\n        // const vh = size.height;\r\n\r\n        const position = this.getPosition();\r\n        const pos_x = position.x;\r\n        const pos_y = position.y;\r\n        const nbRows = this.data.scene.getNbRows();\r\n        const nbColumns = this.data.scene.getNbColumns();\r\n        \r\n        const renderingData = this.data.scene.getRenderingData(\r\n            Math.round(pos_x * (nbColumns )) - this.radius,\r\n            Math.round(pos_y * (nbRows )) - this.radius,\r\n            0,\r\n            Math.round(pos_x * (nbColumns )) + this.radius,\r\n            Math.round(pos_y * (nbRows )) + this.radius,\r\n            10\r\n        );\r\n\r\n\r\n    \r\n        const delta = this.radius / nbColumns;      \r\n        const x0 = Math.round((pos_x - delta) * nbColumns) / nbColumns;\r\n        const y0 = Math.round((pos_y - delta) * nbRows) / nbRows;\r\n\r\n        const xn = Math.round((pos_x + delta) * nbColumns) / nbColumns; \r\n        const yn = Math.round((pos_y + delta) * nbRows) / nbRows\r\n\r\n        context.font = '20px';\r\n            \r\n        // data.x is a normalized position into map\r\n        // we want to transform theses coordinates in 0..1 coordinates in camera grid\r\n        renderingData.forEach((data, index) => {\r\n            const x = Math.round((((data.x - x0) * 100) / (2 * delta)) * rx) / 100;\r\n            const y = Math.round((((data.y - y0) * 100) / (2 * delta)) * rx) / 100;\r\n            const w = Math.round((((data.width)  * 100) / (delta * 2)) * rx) / 100;\r\n            const h = Math.round((((data.height) * 100) / (delta * 2)) * rx) / 100;\r\n           \r\n            data.gameElement.render(\r\n                context, \r\n                x, y, w, h\r\n            );\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        // this.data.coords.recycle();\r\n    }\r\n}\r\n\r\nmodule.exports = Camera;","// const Asset = require('./asset.model')\r\nconst GameElement = require('@core/game-element');\r\n\r\nclass AssetManager {\r\n    constructor() {\r\n        this.ressources = {};\r\n        this.ressourcesDetails = {};\r\n        this.index = {};\r\n    }\r\n\r\n    store(name, data, details = null) {\r\n        this.ressources[name] = data;\r\n        \r\n        if (details === null) {\r\n            this.ressourcesDetails[name] = { name : name };\r\n        }\r\n\r\n        else {\r\n            details.name = name;\r\n            this.ressourcesDetails[name] = details;\r\n        }\r\n        \r\n    }\r\n\r\n    setDetails(ressourceName, details) {\r\n        this.ressourcesDetails[ressourceName] = details;\r\n    }\r\n\r\n    get(name) {\r\n        return this.ressources[name];\r\n    }\r\n\r\n    find(selectors) {\r\n        const ressourcesName = Object.keys(this.ressources);\r\n\r\n        const filteredRessources = ressourcesName.filter(name => {\r\n            const details = this.ressourcesDetails[name];\r\n            Object.keys(selectors).forEach(attributeName => {\r\n                const attributeValue = selectors[attributeName];\r\n                if (details[attributeName] !== attributeValue) {\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return true;\r\n        });\r\n    \r\n        return filteredRessources.map(name => {\r\n            return {\r\n                name: name,\r\n                value: this.ressources[name],\r\n                details: this.ressourcesDetails[name]\r\n            };\r\n        })\r\n    }\r\n\r\n    createIndex(name, content = {}) {\r\n        if (typeof this.index[name] !== 'undefined') {\r\n            throw new Error(`Cannot create an index twice (${name})`);\r\n        }\r\n\r\n        else {\r\n            this.index[name] = content;\r\n        }\r\n    }\r\n\r\n    addToIndex(name, key, value) {\r\n        if (typeof this.index[name] === 'undefined') {\r\n            throw new Error(`Index not found (${name})`);\r\n        }\r\n\r\n        else {\r\n            this.index[name][key] = value;\r\n        }\r\n    }\r\n\r\n    toImage(ressource) {\r\n        return this.getImage(ressource.name);\r\n    }\r\n\r\n    getImage(imageName) {\r\n        return new Promise(resolve => {\r\n            const img = new Image();\r\n            img.onload = () => resolve(img);\r\n            img.src = this.get(imageName);\r\n            img.name = imageName;\r\n        });\r\n    }\r\n\r\n    getImageAsGameElement(imageName) {\r\n        return new Promise(resolve => {\r\n            this.getImage(imageName).then(image => {\r\n                const elt = new GameElement();\r\n                elt.name = image.name;\r\n                elt.setTexture(image);\r\n\r\n                resolve(elt);\r\n            });\r\n        });\r\n    }\r\n    delete(name) {\r\n        delete this.ressources[name];\r\n    }\r\n}\r\n\r\nAssetManager.singleton = null;\r\nAssetManager.getInstance = function() {\r\n    if (AssetManager.singleton === null) {\r\n        AssetManager.singleton = new AssetManager();\r\n    }\r\n\r\n    return AssetManager.singleton;\r\n}\r\n\r\nmodule.exports = AssetManager;\r\n\r\n","module.exports = require('./asset.service').getInstance();","class Canvas {\r\n    constructor(settings = {}) {\r\n        this.node = this.getNode(settings);\r\n        this.context = this.node.getContext('2d');\r\n        this.init_Size(settings);\r\n        this.init_Resolution(settings);\r\n        this.init_Ratio();\r\n       \r\n        if (settings.name) {\r\n            this.setName(settings.name);\r\n        }\r\n\r\n        this.container = this.getContainer(settings);\r\n        \r\n        if (this.container === null) {\r\n            const parent = this.node.parentNode;\r\n            if (parent) {\r\n                this.container = parent;\r\n                this.container.appendChild(this.node);\r\n            }\r\n        }\r\n\r\n        else {\r\n            this.container.appendChild(this.node);\r\n        }\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name;\r\n        this.node.setAttribute('data-name', name);\r\n    }\r\n\r\n    setContainer(container) {\r\n        this.contaner = container;\r\n        this.container.appendChild(this.node);\r\n        return this;\r\n    }\r\n\r\n    addClass(className) {\r\n        this.node.classList.add(className);\r\n        return this;\r\n    }\r\n\r\n    removeClass(className) {\r\n        this.node.classList.remove(className);\r\n        return this;\r\n    }\r\n\r\n    toggleClass(className) {\r\n        this.node.classList.toggle(className);\r\n        return this;\r\n    }\r\n\r\n    getNode(settings) {\r\n        const type = typeof settings.node; \r\n        if (type === 'string') {\r\n            return document.querySelector(settings.node);\r\n        }\r\n\r\n        else if (type === 'object') {\r\n            return settings.node;\r\n        }\r\n\r\n        else {\r\n            return document.createElement('canvas');\r\n        }   \r\n    }\r\n\r\n    getContainer(settings) {\r\n        const type = typeof settings.container;   \r\n  \r\n        if (type === 'string') {\r\n            return document.getElementById(settings.container);\r\n        }\r\n\r\n        else if (type === 'object') {\r\n            return settings.container;\r\n        }\r\n\r\n        else {\r\n            return null;    \r\n        }   \r\n    }\r\n    \r\n    setBackground(color) {\r\n        this.node.style.background = color;\r\n        return this;\r\n    }\r\n\r\n    disableEvent() {\r\n        this.node.style.pointerEvents = 'none';\r\n        return this;\r\n    }\r\n\r\n    enableEvent() {\r\n        this.node.style.pointerEvents = 'auto';\r\n        return this;\r\n    }\r\n\r\n    init_Size(settings) {\r\n        this.size = {};\r\n        const size = settings.size;\r\n        if (typeof size === 'undefined') {\r\n            this.setSize(\r\n                300,\r\n                300,\r\n                false\r\n            );\r\n            \r\n        }\r\n\r\n        else {\r\n            this.setSize(\r\n                size.width, \r\n                size.height,\r\n                false\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n\r\n    init_Resolution(settings) {\r\n        this.resolution = {};\r\n        const resolution = settings.resolution;\r\n\r\n        if (typeof resolution === 'undefined') {    \r\n            this.setResolution(\r\n                this.size.width,\r\n                this.size.height\r\n            );\r\n        }\r\n\r\n        else {\r\n            \r\n            this.setResolution(\r\n                resolution.width, \r\n                resolution.height\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    clear() {\r\n        const resolution = this.resolution;\r\n        this.context.clearRect(\r\n            0, 0, \r\n            resolution.width, resolution.height\r\n        );\r\n    }\r\n\r\n    init_Ratio() {\r\n        this.ratio = {};\r\n        this.updateRatio();\r\n    }\r\n\r\n    setSize(width, height, refreshRatio = true) {\r\n        this.size.width = width;\r\n        this.size.height = height;\r\n\r\n        this.node.style.width = width + 'px';\r\n        this.node.style.height = height + 'px';\r\n        \r\n        if (refreshRatio === true) {\r\n            this.updateRatio();\r\n        }\r\n    }\r\n\r\n    getSize() {\r\n        return this.size;\r\n    }\r\n\r\n    getWidth() {\r\n        return this.size.width;\r\n    }\r\n\r\n    getHeight() {\r\n        return this.size.height;\r\n    }\r\n\r\n    getInnerWidth() {\r\n        return this.resolution.width;\r\n    }\r\n\r\n    getInnerHeight() {\r\n        return this.resolution.height;\r\n    }\r\n\r\n    getResolution() {\r\n        return JSON.parse(JSON.stringify(this.resolution));\r\n    }\r\n\r\n    setResolution(width, height) {\r\n        this.node.width = width;\r\n        this.node.height = height;\r\n\r\n        this.resolution.width = width;\r\n        this.resolution.height = height;\r\n    }\r\n\r\n    updateRatio() {\r\n        const size = this.size;\r\n        const ratio = this.ratio;\r\n        const resolution = this.resolution;\r\n\r\n        if (size.width === 0 || size.height === 0) {\r\n            ratio.x = 1;\r\n            ratio.y = 1;\r\n        }\r\n\r\n        else {\r\n            ratio.x = resolution.width / size.width;\r\n            ratio.y = resolution.height / size.height;\r\n        }\r\n    }\r\n\r\n    getPixelsCoordsFromPageCoords(coords) {\r\n        const x = coords.x - this.node.offsetLeft + window.scrollX;\r\n        const y = coords.y - this.node.offsetTop + window.scrollY;\r\n        return {x, y};\r\n    }\r\n\r\n    getCellCoordsFromPixelCoords(coords) {\r\n        const ratio  = this.ratio;\r\n        const x      = Math.floor(coords.x * ratio.x);\r\n        const y      = Math.floor(coords.y * ratio.y);\r\n        return {x, y};\r\n    }\r\n\r\n    getNormalizedPosition(coords) {\r\n        const x = (coords.x - this.node.offsetLeft + window.scrollX) / this.size.width;\r\n        const y = (coords.y - this.node.offsetTop + window.scrollY) / this.size.height;\r\n        return {x, y};\r\n    }\r\n}\r\n\r\nmodule.exports = Canvas;","module.exports = require('./canvas.model');","class POOL {\r\n    constructor(settings) {\r\n        this.type = settings.type;\r\n        this.isInitialized = false;\r\n\r\n        const capacity = settings.capacity || 10;\r\n        this.data = new Array(capacity);\r\n        this.index = capacity -1;\r\n        \r\n\r\n        this.initPool();\r\n    }\r\n\r\n    getCapacity() {\r\n        return this.data.length;\r\n    }\r\n\r\n    initPool() {\r\n        const capacity = this.getCapacity();\r\n        for(let i = 0; i < capacity; ++i) {\r\n            this.data[i] = new (this.type)();\r\n        }\r\n    }\r\n\r\n    setCapacity(capacity) {\r\n        this.data.length = capacity;\r\n    }\r\n\r\n    beSureThatCapacityIsOkay() {\r\n        const capacity = this.getCapacity();\r\n        if ((1 + this.index) === capacity) {\r\n            this.setCapacity(capacity + 10);\r\n        }\r\n    }\r\n\r\n    recycle(instance) {\r\n        this.beSureThatCapacityIsOkay();\r\n\r\n        this.data[this.index] = instance;\r\n        this.index++;\r\n    }\r\n\r\n    getOne() {\r\n        let instance  = null;\r\n\r\n        if (this.index > 0) {\r\n            instance = this.data[this.index];\r\n            this.index--;\r\n        }\r\n\r\n        else {\r\n            instance = new (this.type)();\r\n        }\r\n\r\n        instance.core.pool = this;\r\n        return instance;\r\n    }\r\n}\r\n\r\nmodule.exports = POOL;","const Entity = require('../entity/entity.model')\r\n\r\nclass MouseController extends Entity {\r\n    constructor(settings = {}) {\r\n        super(settings);\r\n\r\n        this.component = settings.component;\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        console.log('mouse move', event);\r\n    }\r\n\r\n    onLeftClick(event) {\r\n        console.log('mouse left click', event);\r\n    }\r\n\r\n    onRightClick(event) {\r\n        console.log('mouse right click', event);\r\n    } \r\n\r\n    onMouseWheel(event) {\r\n        console.log('mouse wheel', event);\r\n    }\r\n\r\n    onMouseDown(event) {\r\n        event = event || window.event;\r\n        let button = 0;\r\n        \r\n        if (typeof event.buttons === 'undefined') {\r\n            button = event.which || event.button;\r\n        }\r\n\r\n        switch(button) {\r\n            case MouseController.LEFT_CLICK:\r\n                this.onLeftClick(event);\r\n                break;\r\n            case MouseController.RIGHT_CLICK:  \r\n                this.onRightClick(event);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onMouseOut() {\r\n\r\n    }\r\n\r\n    onMouseEnter() {\r\n\r\n    }\r\n    \r\n    static isLeftClick(event) {\r\n        // https://stackoverflow.com/questions/3944122/detect-left-mouse-button-press\r\n        event = event || window.event;\r\n        if (typeof event.buttons !== 'undefined') {\r\n            return event.buttons == 1;\r\n        }\r\n\r\n        const button = event.which || event.button;\r\n        return button == 1;\r\n    }\r\n\r\n    static isRightClick(event) {\r\n        event = event || window.event;\r\n        if (typeof event.buttons !== 'undefined') {\r\n            return event.buttons == 0;\r\n        }\r\n\r\n        const button = event.which || event.button;\r\n        return button == 0;\r\n    }\r\n}\r\n\r\nMouseController.LEFT_CLICK = 1;\r\nMouseController.RIGHT_CLICK = 2;\r\nmodule.exports = MouseController;","class Coords {\r\n    constructor(pool) {\r\n        this.core = {\r\n            pool: pool || null\r\n        }\r\n    }\r\n\r\n    set(coords) {\r\n        const max = Math.min(this.data.length, coords.data.length);\r\n\r\n        for(let i = 0; i < max; ++i) {\r\n            this.data[i] = coords.data[0];\r\n        }\r\n    }\r\n\r\n    get() {\r\n        return this.data;\r\n    }\r\n\r\n    recycle() {\r\n        if (this.core.pool !== null) {\r\n            this.core.pool.recycle(this);\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = Coords;","const Coords = require('./coords.model');\r\n\r\nclass Coords2D extends Coords {\r\n    constructor(x = 0, y = 0, pool = null) {\r\n        super(pool);\r\n        this.data = [x, y];\r\n    }\r\n\r\n    getX() {\r\n        return this.data[0];\r\n    }\r\n\r\n    getY() {\r\n        return this.data[1];\r\n    }\r\n\r\n    setX(x) {\r\n        this.data[0] = x;\r\n    }\r\n\r\n    setY(y) {\r\n        this.data[1] = y;\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = Coords2D;","const Coords2D = require('./coords2D.model');\r\n\r\nclass Coords3D extends Coords2D {\r\n    constructor(x = 0, y = 0, z = 0, pool = null) {\r\n        super(x, y, pool)\r\n        this.data.length = 3;\r\n        this.data[2] = z;\r\n    }\r\n\r\n    getZ() {\r\n        return this.data[2];\r\n    }\r\n\r\n    setZ(z) {\r\n        this.data[2] = z;\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = Coords3D;","const Coords2D = require('./coords2D.model');\r\nconst Coords3D = require('./coords3D.model');\r\n\r\nconst POOL = require('../components/POOL.model');\r\n\r\n\r\nmodule.exports = {\r\n    _2D: new POOL({\r\n        type: Coords2D,\r\n        capacity: 20\r\n    }),\r\n    \r\n    _3D: new POOL({\r\n        type: Coords3D\r\n    })\r\n};","module.exports = {\r\n    name: 'entity',\r\n    version: '1.0.0',\r\n\r\n    strictMode: false,\r\n    verboseMode: false,\r\n    auto_setup_settings: true,\r\n\r\n    services: {}\r\n}","const EventEmitter = require('events').EventEmitter;\r\nconst configuration = require('./entity.model.config');\r\nconst Notification = require('../notification');\r\n\r\nlet counter = 0;\r\n\r\nclass Entity {\r\n    constructor(settings = {}) {\r\n        // Must copy configuration file cause later a delete may remove services.skill\r\n        settings = Object.assign(JSON.parse(JSON.stringify(configuration)), settings);\r\n        \r\n        this.name = settings.name;\r\n\r\n        this.initialize_skills(settings);\r\n\r\n        this.skills       = {};\r\n        this.data         = {};\r\n        this.ui           = {};\r\n        this.subscriptions  = {};\r\n\r\n        this.services = settings.services;\r\n        this.strictMode = settings.strictMode;\r\n        this.verboseMode = settings.verboseMode;\r\n\r\n       \r\n        \r\n        if (settings.testMode === true) {\r\n            this.enableTestMode();\r\n        }\r\n\r\n        else {\r\n            this.store('services_to_enable', settings.services);\r\n        }\r\n    }\r\n\r\n    setupListener(settings) {\r\n        this.listeners = [];\r\n    }\r\n\r\n    \r\n\r\n    sendNotificationToSubscribers(subscribers, name, data) {\r\n        if (\r\n            typeof subscribers !== 'undefined' && \r\n            typeof subscribers.forEach === 'function'\r\n        ) {\r\n            subscribers.forEach(record => {\r\n                const notification = Notification.POOL.getOne(name, data, this);\r\n\r\n                if (typeof record.callback === 'Promise') {\r\n                    record.callback(notification).then(\r\n                        () => {\r\n                            notification.recycle();\r\n                        },\r\n\r\n                        () => {\r\n                            notification.recycle();\r\n                        }\r\n                    );\r\n                }\r\n\r\n                else {\r\n                    record.callback(notification);\r\n                    notification.recycle();\r\n                }\r\n            \r\n            });\r\n        }\r\n    }\r\n\r\n    notify(name, data = {}) {\r\n        this.sendNotificationToSubscribers(this.subscriptions[name], name, data);\r\n        this.sendNotificationToSubscribers(this.subscriptions.all, name, data);  \r\n    }\r\n\r\n    getData(propertyName) {\r\n        return this.data[propertyName];\r\n    }\r\n\r\n    subscribeTo(observable, eventName = 'all', callback = null) {\r\n        if (callback === null) {\r\n            callback = this.onNewNotification.bind(this);\r\n        }\r\n\r\n        observable.register(this, eventName, callback);\r\n    }\r\n\r\n    // subscribe(observable) {\r\n    //     observable.register(this);\r\n    //     // record all subscribed ?\r\n    // }\r\n\r\n    register(subscriber, eventName, callback) {\r\n        let subscription = this.subscriptions[eventName];\r\n        if (typeof subscription !== Set) {\r\n            subscription = new Set();\r\n            this.subscriptions[eventName] = subscription;\r\n        }\r\n\r\n        subscription.add({\r\n            subscriber, \r\n            callback\r\n        });\r\n    }\r\n\r\n    onNewNotification(notification) {\r\n        const notificationName = notification.name;\r\n\r\n        // override me !\r\n\r\n        notification.recycle();\r\n    }\r\n\r\n    createCustomEvent(eventName, data) {\r\n        if (typeof window.CustomEvent === \"function\") {\r\n            return new CustomEvent(eventName, data);\r\n        }\r\n        // IE polyfill\r\n        else {\r\n            const params = data || { bubbles: false, cancelable: false, detail: undefined };\r\n            const evt = document.createEvent( 'CustomEvent' );\r\n            evt.initCustomEvent( eventName, params.bubbles, params.cancelable, params.detail );\r\n            return evt;\r\n        }\r\n    }\r\n    \r\n    \r\n    init_id(settings) {\r\n        this.entity_id = `entity_${++counter}`;\r\n        if (typeof settings._id === 'undefined') {\r\n            this._id = settings._id;\r\n        }\r\n\r\n        else {\r\n            this._id = this.entity_id;\r\n        }\r\n    }\r\n    \r\n    disable_skills(settings = {}) {\r\n        if (typeof settings.services !== 'undefined') {\r\n            delete settings.services.skill;\r\n        }\r\n    }\r\n\r\n    initialize_skills(settings = {}) {\r\n        this.skills = {};\r\n\r\n        if (settings.disableSkills === true) {\r\n            this.disable_skills(settings);\r\n        }\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name;\r\n    }\r\n\r\n    setId(id) {\r\n        this._id = id;\r\n    }\r\n\r\n    setService(serviceName, serviceInstance) {\r\n        this.services[serviceName] = serviceInstance;\r\n    }\r\n    \r\n    enableStrictMode() {\r\n        this.strictMode = true;\r\n    }\r\n\r\n    disableStrictMode() {\r\n        this.strictMode = false;\r\n    }\r\n\r\n    disableVerboseMode() {\r\n        this.verboseMode = false;\r\n    }\r\n\r\n    enableVerboseMode() {\r\n        this.verboseMode = true;\r\n    }\r\n\r\n    enableTestMode() {\r\n        this.enableStrictMode();\r\n        this.enableVerboseMode();\r\n    }\r\n\r\n    disableTestMode() {\r\n        this.disableStrictMode();\r\n        this.disableVerboseMode();\r\n    }\r\n\r\n    emit(eventName, data) {\r\n        const target = data.target || window;\r\n        const event = this.createCustomEvent(eventName, data);\r\n        target.dispatchEvent(event);\r\n    }\r\n\r\n    listen(eventName, handler) {\r\n        window.addEventListener(eventName, handler);\r\n\r\n        this.listeners = [{\r\n            eventName: eventName,\r\n            handler: handler\r\n        }];\r\n    }\r\n\r\n    store(attributeName, attributeValue) {\r\n        this.data[attributeName] = attributeValue;\r\n    }\r\n\r\n    //https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\r\n    /**\r\n    * @param {String} htmlString representing a single element\r\n    * @return {Element}\r\n    */\r\n   generateDOM(htmlString = '') {\r\n        const template = document.createElement('template');\r\n        template.innerHTML = htmlString.trim();\r\n        return template.content.firstChild;\r\n    }\r\n\r\n    get(attributeName) {\r\n        return this.data[attributeName];\r\n    }\r\n\r\n    log() {\r\n        console.log.call(null, this.name + ': ', ...arguments);       \r\n    }\r\n\r\n    debug() {\r\n        if (this.verboseMode) {\r\n            this.log('debug');\r\n            this.log(...arguments);\r\n        }\r\n    }\r\n\r\n    doAsync(task, delay = 1) {\r\n        setTimeout(() => {\r\n            task();\r\n        }, delay);\r\n    }\r\n\r\n    // async waitingFor(promisesArray) {\r\n    //     return await Promise.all(promisesArray);\r\n    // }\r\n\r\n    hasSkill(skillName) {\r\n        return typeof this.skills[skillName] !== 'undefined';\r\n    }\r\n\r\n    notifyError(error, throwError = true) {\r\n        console.error(`[${this.name}] ${error}`);\r\n        \r\n        if (throwError === true || this.strictMode === true) {\r\n            if (error instanceof Error) {\r\n                throw error;\r\n            }\r\n            \r\n            else {\r\n                throw new Error(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeListener(listener) {\r\n        this.removeEventListener(listener.eventName, listener.handler)\r\n    }\r\n\r\n    removeAllListeners() {\r\n        this.listeners.forEach(\r\n            listener => {\r\n                this.removeListener(listener)\r\n            }\r\n        );\r\n    }\r\n\r\n    destroy() {\r\n        this.removeAllListeners();\r\n    }\r\n}\r\n\r\nmodule.exports = Entity;","module.exports = require('./entity.model');","const Entity = require('@core/entity');\r\n\r\nclass GameElement extends Entity {\r\n    constructor(settings = {}) {\r\n        super(settings);\r\n\r\n        this.setTexture(settings.texture);\r\n        this.setPosition(settings.position)\r\n    }\r\n\r\n    move(delta) {\r\n        this.data.position.x += delta.x;\r\n        this.data.position.y += delta.y;\r\n    }\r\n\r\n    getX() {\r\n        return this.data.position.x;\r\n    }\r\n\r\n    getY() {\r\n        return this.data.position.y;\r\n    }\r\n\r\n    getWidth() {\r\n        return this.data.size.width;\r\n    }\r\n\r\n    getHeight() {\r\n        return this.data.size.height;\r\n    }\r\n\r\n    getPosition() {\r\n        return this.data.position;\r\n    }\r\n    \r\n    setPosition(position = {x: 0, y:0}) {\r\n        this.data.position = position;\r\n    }\r\n\r\n    setSize(size = {width: 0, height:0}) {\r\n        this.data.size = size;\r\n    }\r\n\r\n    setTexture(texture = null) {\r\n        this.data.texture = texture;\r\n    }\r\n\r\n    render(context = null, x, y, w, h) {\r\n        const d = this.data;\r\n        const p = d.position;\r\n        const s = d.size;\r\n        \r\n        if (typeof x !== 'number') {\r\n            x = p.x;\r\n        }\r\n\r\n\r\n        if (typeof y !== 'number') {\r\n            y = p.y;\r\n        }\r\n \r\n        context.drawImage(d.texture, x, y, w || s.width, h || s.height);\r\n        // context.drawImage(d.texture, x, y, w, h);\r\n    }\r\n}\r\n\r\nmodule.exports = GameElement;","module.exports = require('./game-element.model');","const Notification = require('./notification.model');\r\nconst POOL = require('./notification.POOL');\r\n\r\nif (Notification.POOL === null) {\r\n    Notification.POOL = new POOL();\r\n}\r\n\r\nmodule.exports = Notification;","const Notification = require('./notification.model');\r\nconst POOL = require('../components/POOL.model');\r\n\r\nclass NotificationPOOL extends POOL {\r\n    constructor(settings) {\r\n        super({\r\n            type: Notification,\r\n            capacity: 10\r\n        });\r\n    }\r\n\r\n    getOne(name, data, emitter) {\r\n        const notification = super.getOne();\r\n        notification.setName(name);\r\n        notification.setEmitter(emitter);\r\n        notification.setData(data);\r\n\r\n\r\n        return notification;\r\n    }\r\n   \r\n}\r\n\r\n\r\n\r\nmodule.exports = NotificationPOOL;","class Notification {\r\n    constructor(name, data = null, emitter = null) {\r\n        this.name = name || '';\r\n        this.data = data;\r\n        this.emitter = emitter;\r\n\r\n        this.core  = {};\r\n    }\r\n\r\n    getName() {\r\n        return this.name;\r\n    }\r\n\r\n    getData() {\r\n        return this.data;\r\n    }\r\n\r\n    setData(data) {\r\n        this.data = data;\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name;\r\n    }\r\n\r\n    setEmitter(emitter) {\r\n        this.emitter = emitter;\r\n    }\r\n\r\n    clear() {\r\n        this.name = null;\r\n        this.data = null;\r\n        this.emitter = null;\r\n    }\r\n\r\n    recycle() {\r\n        this.clear();\r\n        Notification.POOL.recycle(this);\r\n    }\r\n}\r\n\r\nif (typeof Notification.POOL === 'undefined') {\r\n    Notification.POOL = null;\r\n}\r\n\r\nmodule.exports = Notification;","module.exports = require('./viewport.model');","const Entity = require('../entity/entity.model');\r\nconst MouseController = require('./viewport.mouse.controller');\r\nconst Canvas = require('../canvas');\r\n\r\nclass ViewPort extends Entity {\r\n    constructor(settings = {}) {\r\n        super(settings);\r\n        this.init_ViewPort(settings);\r\n    }\r\n\r\n    \r\n    drawCoordinates() {\r\n        const context = this.getContext();\r\n        const { width, height } = this.getResolution();\r\n\r\n        context.font = '1px serif';\r\n        for (let i = 0; i < width; i++) {\r\n            for (let j = 0; j < height; j++) {\r\n                context.fillText(`(${i}, ${j})`, i, j);\r\n            }    \r\n        }\r\n    }\r\n\r\n    getResolution(layerName = 'main') {\r\n        return this.layers[layerName].resolution;\r\n    }\r\n\r\n    getSize(layerName = 'main') {\r\n        return this.layers[layerName].size;\r\n    }\r\n\r\n    getContext(layerName = 'main') {\r\n        return this.layers[layerName].context;  \r\n    }\r\n\r\n    init_Controllers(settings) {\r\n        this.controllers = {};\r\n        this.init_MouseController(settings);\r\n    }\r\n\r\n    init_MouseController(settings = {}) {\r\n        let Model = MouseController;\r\n\r\n        if (typeof settings.MouseController === 'function') {\r\n            Model = settings.MouseController;\r\n        }\r\n\r\n        this.setMouseController(new Model({\r\n            component: this\r\n        }));\r\n    }\r\n\r\n    setMouseController(handler) {\r\n        this.controllers.mouse = handler\r\n    }\r\n\r\n    setupViewPortListeners(settings) {\r\n        this.init_Controllers(settings);\r\n        const mainLayer = this.layers.main.node;\r\n       \r\n        mainLayer.addEventListener('mousemove', (event) => {\r\n            this.controllers.mouse.onMouseMove(event);\r\n        });\r\n\r\n        mainLayer.addEventListener('mousedown', (event) => {\r\n           this.controllers.mouse.onMouseDown(event);\r\n        });\r\n\r\n        mainLayer.addEventListener('mouseout', event => {\r\n            this.controllers.mouse.onMouseOut(event);\r\n        });\r\n\r\n        mainLayer.addEventListener('mouseenter', event => {\r\n            this.controllers.mouse.onMouseEnter(event);\r\n        });\r\n    }\r\n\r\n    addLayer(name) {\r\n        const main = this.layers.main; \r\n        \r\n        const layer = new Canvas({\r\n            name: name,\r\n            container: main.container,\r\n            size: main.size,\r\n            resolution: main.resolution\r\n        });\r\n\r\n        layer\r\n            .disableEvent()\r\n            .addClass('gd-viewport')\r\n            .setBackground('none')\r\n        ;\r\n\r\n        this.layers[name] = layer;\r\n    }\r\n\r\n    clear(layer) {\r\n        if (typeof layer === 'string') {\r\n            this.layers[layer].clear();\r\n        }\r\n\r\n        else {\r\n            Object.values(this.layers).forEach(\r\n                layer => layer.clear()\r\n            );\r\n        }\r\n    }\r\n    \r\n    init_ViewPort(settings = {}) {\r\n        settings.name = 'main';\r\n        const main = new Canvas(settings);\r\n        main.addClass('gd-viewport');\r\n\r\n        // .setContainer(\r\n        //     document.getElementById(settings.container)\r\n        // );\r\n        \r\n        this.layers = { main };\r\n        this.shrinkContainer();\r\n\r\n        this.addLayer('ui');\r\n\r\n        this.setupViewPortListeners(settings);\r\n    }\r\n\r\n    setResolution(width, height) {\r\n        Object.values(this.layers).forEach(\r\n            layer => layer.setResolution(width, height)\r\n        );\r\n    }\r\n\r\n    shrinkContainer() {\r\n        this.layers.main.container.style.width = this.layers.main.getWidth() + 'px';\r\n    }\r\n    \r\n    setSize(width, height, refreshRatio = true) {\r\n        Object.values(this.layers).forEach(\r\n            layer => layer.setSize(width, height, refreshRatio)\r\n        );\r\n\r\n        this.shrinkContainer();\r\n        \r\n        if (refreshRatio === true) {\r\n            this.setResolution(width, height)\r\n        } \r\n    }\r\n\r\n    getPixelsCoordsFromPageCoords(coords) {\r\n        return this.layers.main.getPixelsCoordsFromPageCoords(coords);\r\n    }\r\n\r\n    bind(component) {\r\n        component.subscribe(this);\r\n    }\r\n\r\n    getCellCoordsFromPixelCoords(coords) {\r\n        const ratio  = this.layers.main.ratio;\r\n        const x      = Math.floor(coords.x * ratio.x);\r\n        const y      = Math.floor(coords.y * ratio.y);\r\n        return {x, y};\r\n    }\r\n\r\n    getNormalizedPosition(coords) {\r\n        return this.layers.main.getNormalizedPosition(coords);\r\n    }\r\n}\r\n\r\nmodule.exports = ViewPort;","const MouseController = require('../controllers/mouse.controller');\r\n\r\nclass ViewPortMouseController extends MouseController {\r\n    constructor(settings) {\r\n       super(settings);\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        const pixelCoords = this.component.getPixelsCoordsFromPageCoords(event);\r\n        const cellCoords = this.component.getCellCoordsFromPixelCoords(pixelCoords);\r\n        const p = this.component.getNormalizedPosition(event);\r\n        this.component.notify('updateCoords', p);\r\n    }\r\n}\r\n\r\nmodule.exports = ViewPortMouseController;","const Map = require('./map.model');\r\nconst TileMap = require('./tile-map.model');\r\n\r\nmodule.exports = require('./map.model');","const Entity = require('../core/entity/entity.model');\r\nclass Map extends Entity {\r\n    constructor(settings = {}) {\r\n        super(settings);\r\n\r\n        this.layers = {};\r\n\r\n\r\n        this.context = {\r\n            topLeftPixelCoords: {\r\n                x: 0,\r\n                y:0\r\n            },\r\n\r\n            topRightPixelCoords: {\r\n                x: 0,\r\n                y:0\r\n            },\r\n\r\n            bottomLeftPixelCoords: {\r\n                x: 0,\r\n                y:0\r\n            },\r\n\r\n\r\n        }\r\n\r\n        this.data.nbRows           = settings.nbRows || 10;\r\n        this.data.nbColumns        = settings.nbColumns || 10;\r\n        this.data.nbLayers         = 0;\r\n        this.data.layersAvailabes  = [];\r\n    }\r\n\r\n    getLayer(z) {\r\n        return this.layers[z] || null;\r\n    }\r\n\r\n    setLayer(layers = {}, index) {\r\n        this.layers[index] = layers;\r\n        this.data.nbLayers = Object.keys(this.layers).length;\r\n        this.data.layersAvailabes = Object.values(this.layers).sort();\r\n    }\r\n\r\n    add(gameElement, x = 0, y = 0, z = 0) {\r\n        if (typeof this.layers[z] !== 'undefined') {\r\n            if (typeof this.layers[z][x] !== 'undefined') {\r\n                this.layers[z][x][y] = gameElement;\r\n            }\r\n\r\n            else {\r\n                this.layers[z][x] = {};\r\n                this.layers[z][x][y] = gameElement;\r\n            }\r\n        }\r\n\r\n        else {\r\n            const layer = {};\r\n            layer[x] = {};\r\n            layer[x][y] = gameElement;\r\n            this.setLayer(layer, z);\r\n        }\r\n    }\r\n\r\n    // render(x_min, y_min, z_min, x_max, y_max, z_max, context) {\r\n    //     let layer, row = null;\r\n    //     for(let z = z_min; z < z_max; ++z) {\r\n    //         if (typeof this.layers[z] === 'undefined') {\r\n    //             continue;\r\n    //         }\r\n\r\n    //         else {\r\n    //             layer = this.layers[z];\r\n    //         }\r\n\r\n    //         for(let y = y_min; y < y_max; ++y) {\r\n    //             if (typeof layers[y] === 'undefined') {\r\n    //                 continue;\r\n    //             }\r\n    \r\n    //             else {\r\n    //                 row = layers[y];\r\n    //             }\r\n\r\n    //             for(let x = x_min; x < x_max; ++x) {\r\n    //                 if (typeof row[x] === \"undefined\") {\r\n    //                     continue\r\n    //                 }\r\n\r\n    //                 else {\r\n    //                     row[x].render(context)\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    getNbRows() {\r\n        return this.data.nbRows;\r\n    }\r\n\r\n    getNbColumns() {\r\n        return this.data.nbColumns;\r\n    }\r\n\r\n    viewPortCellCoordsToMapCellCoords(viewportCellCoords) {\r\n        const x = Math.floor(viewportCellCoords.x * this.getNbRows());\r\n        const y = Math.floor(viewportCellCoords.y * this.getNbColumns());\r\n        return {x, y};\r\n    }\r\n    \r\n\r\n    // onNewNotification(notification) {\r\n    //     const notificationName = notification.name;\r\n\r\n    //     switch(notificationName) {\r\n    //         case 'updateCoords':\r\n    //             this.viewPortCellCoordsToMapCellCoords(notification.data);\r\n    //             break;\r\n    //         default:\r\n    //             break;\r\n    //     } \r\n\r\n    //     // override me !\r\n\r\n    //     notification.recycle();\r\n    // }\r\n}\r\n\r\nmodule.exports = Map;","const Map = require('./map.model');\r\nclass TileMap extends Map {\r\n    constructor(settings = {}) {\r\n        settings.name = settings.name || 'tile-map';\r\n        super(settings);\r\n    }\r\n\r\n    add(tile, x = 0, y = 0, z = 0, width = 1, height = 1) {\r\n        tile.setPosition({x, y});\r\n        tile.setSize({width, height});\r\n        super.add(tile, x, y, z);\r\n    }\r\n\r\n    // map date is an object like\r\n    // { layer: { x : { y : gameElement }}}\r\n    fill(mapData) {\r\n\r\n    }\r\n\r\n    getRenderingDataFromNormalizedCoords(x_min = 0, y_min = 0, z_min = 0, x_max = 0, y_max = 1, z_max = 1) {\r\n        const nbColumns = this.getNbColumns();\r\n        const nbRows = this.getNbRows();\r\n        return this.getRenderingData(\r\n            Math.round(x_min *  nbColumns),\r\n            Math.round(y_min *  nbRows),\r\n            z_min,\r\n            Math.round(x_max *  nbColumns),\r\n            Math.round(y_min *  nbRows),\r\n            z_max,\r\n        );\r\n    }\r\n\r\n    getTile(x, y, z = 0) {\r\n        const layer = this.layers;\r\n        if (\r\n            typeof layer[z] !== 'undefined' &&\r\n            typeof layer[z][x] !== 'undefined'\r\n        ) {\r\n            return this.layers[z][x][y];\r\n        }\r\n\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    \r\n    getRenderingData(x_min = 0, y_min = 0, z_min = 0, x_max = this.getNbColumns(), y_max = this.getNbRows(), z_max = 10) {\r\n        let layer, column = null;\r\n        let renderingData = [];\r\n        let x, y, z;\r\n\r\n\r\n       \r\n        for(z = z_min; z < z_max; z++) {\r\n            layer = this.getLayer(z);\r\n            if (layer !== null) {\r\n                for(x = x_min; x < x_max; x++) {\r\n                    if (typeof layer[x] !== 'undefined') {\r\n                        column = layer[x];\r\n                        for(y = y_min; y < y_max; y++) {\r\n                            if (typeof column[y] !== \"undefined\") {\r\n                                const elt = column[y];\r\n                                renderingData.push({\r\n                                    gameElement: elt,\r\n                                    x: elt.getX() / this.getNbColumns(),\r\n                                    y: elt.getY() / this.getNbRows(),\r\n                                    width: elt.getWidth() / this.getNbColumns(),\r\n                                    height: elt.getHeight() / this.getNbRows()\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return renderingData;\r\n    }\r\n\r\n    \r\n    getNbRows() {\r\n        return this.data.nbRows;\r\n    }\r\n\r\n    getNbColumns() {\r\n        return this.data.nbColumns;\r\n    }\r\n\r\n    viewPortCellCoordsToMapCellCoords(viewportCellCoords) {\r\n        const x = Math.floor(viewportCellCoords.x * this.getNbRows());\r\n        const y = Math.floor(viewportCellCoords.y * this.getNbColumns());\r\n        return {x, y};\r\n    }\r\n}\r\n\r\nmodule.exports = TileMap;","class Tile {\r\n    constructor(settings = {}) {\r\n        this.src = settings.value;\r\n        this.name = settings.name;\r\n        this.setImg(settings.img);\r\n\r\n        this.details = settings.details\r\n\r\n    }\r\n\r\n    setImg(img = new Image()) {\r\n        this.img = img;\r\n        this.loaded = img.height !== 0;\r\n    }\r\n\r\n    isLoaded() {\r\n        return this.loaded;\r\n    }\r\n\r\n    load() {\r\n        return new Promise(resolve => {\r\n            const img = new Image();\r\n            img.onload = () => {\r\n                this.setImg(img);\r\n                this.img = img;\r\n                resolve(img);\r\n            };\r\n\r\n            img.src = this.src;\r\n            img.name = this.name;\r\n        });\r\n    }\r\n\r\n    setDetails(details) {\r\n        this.details = details;\r\n    }\r\n}\r\n\r\nmodule.exports = Tile;","module.exports = {\r\n    defaultName: 'Untitled tileset'\r\n};","const defaults = require('./Tileset.config');\r\nconst Entity = require('@core/entity');\r\nconst Tile = require('./Tile.model');\r\n\r\nclass Tileset extends Entity {\r\n    constructor(settings = {}) {\r\n        super(settings);\r\n\r\n        this.setName(settings.name);\r\n        this.tiles = null; \r\n        this.assetManager = settings.assetManager;\r\n\r\n        this.index = settings.index || null;\r\n        this.retrieveTiles();\r\n    }\r\n\r\n    retrieveTiles() {\r\n        let ressources;\r\n\r\n        if (this.index === null) {\r\n            ressources = this.assetManager.find({\r\n                tileset: this.name\r\n            });\r\n        }\r\n\r\n        else {\r\n            ressources = this.assetManager.index[this.index];\r\n        }\r\n       \r\n        this.tiles = ressources.map(ressource => {\r\n            return new Tile(ressource);\r\n        });\r\n    }\r\n\r\n    loadTiles() {\r\n        return this.tiles.filter(tile => {\r\n            return tile.isLoaded() === false;\r\n        }).map(tile => {\r\n            tile.load();\r\n        });\r\n    }\r\n\r\n    getTile(name) {\r\n        return this.tiles[name];\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name || defaults.name;\r\n    }\r\n\r\n    exports() {\r\n        // todo\r\n    }\r\n\r\n    import() {\r\n        // todo\r\n    }\r\n\r\n    getTiles() {\r\n        return Object.values(this.tiles);\r\n    }\r\n}\r\n\r\nmodule.exports = Tileset;","module.exports = require('./Tileset.model');","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/app/index.js\");\n",""],"names":["module","exports","GameDong","prefix","AssetManager","store","require","app","Map","TileMap","TileSet","Camera","Coords","ViewPort","GameElement","MouseController","Canvas","error","console","window","settings","radius","scene","data","viewport","resolution","getResolution","size","getSize","context","getContext","rx","width","ry","height","position","getPosition","pos_x","x","pos_y","y","nbRows","getNbRows","nbColumns","getNbColumns","renderingData","getRenderingData","Math","round","delta","x0","y0","xn","yn","font","forEach","index","w","h","gameElement","render","ressources","ressourcesDetails","name","details","ressourceName","selectors","ressourcesName","Object","keys","filteredRessources","filter","attributeName","attributeValue","map","value","content","Error","key","ressource","getImage","imageName","Promise","resolve","img","Image","onload","src","get","then","image","elt","setTexture","singleton","getInstance","node","getNode","init_Size","init_Resolution","init_Ratio","setName","container","getContainer","parent","parentNode","appendChild","setAttribute","contaner","className","classList","add","remove","toggle","type","document","querySelector","createElement","getElementById","color","style","background","pointerEvents","setSize","setResolution","clearRect","ratio","updateRatio","refreshRatio","JSON","parse","stringify","coords","offsetLeft","scrollX","offsetTop","scrollY","floor","POOL","isInitialized","capacity","Array","initPool","length","getCapacity","i","setCapacity","instance","beSureThatCapacityIsOkay","core","pool","Entity","component","event","log","button","buttons","which","LEFT_CLICK","onLeftClick","RIGHT_CLICK","onRightClick","max","min","recycle","Coords2D","Coords3D","z","_2D","_3D","version","strictMode","verboseMode","auto_setup_settings","services","EventEmitter","configuration","Notification","counter","assign","initialize_skills","skills","ui","subscriptions","testMode","enableTestMode","listeners","subscribers","record","notification","getOne","callback","sendNotificationToSubscribers","all","propertyName","observable","eventName","onNewNotification","bind","register","subscriber","subscription","Set","notificationName","CustomEvent","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","entity_id","_id","skill","disableSkills","disable_skills","id","serviceName","serviceInstance","enableStrictMode","enableVerboseMode","disableStrictMode","disableVerboseMode","target","createCustomEvent","dispatchEvent","handler","addEventListener","htmlString","template","innerHTML","trim","firstChild","call","arguments","task","delay","setTimeout","skillName","throwError","listener","removeEventListener","removeListener","removeAllListeners","texture","setPosition","d","p","s","drawImage","NotificationPOOL","emitter","setEmitter","setData","clear","init_ViewPort","j","fillText","layerName","layers","controllers","init_MouseController","Model","setMouseController","mouse","init_Controllers","mainLayer","main","onMouseMove","onMouseDown","onMouseOut","onMouseEnter","layer","disableEvent","addClass","setBackground","values","shrinkContainer","addLayer","setupViewPortListeners","getWidth","getPixelsCoordsFromPageCoords","subscribe","getNormalizedPosition","ViewPortMouseController","pixelCoords","cellCoords","getCellCoordsFromPixelCoords","notify","topLeftPixelCoords","topRightPixelCoords","bottomLeftPixelCoords","nbLayers","layersAvailabes","sort","setLayer","viewportCellCoords","tile","mapData","x_min","y_min","z_min","x_max","y_max","z_max","column","getLayer","push","getX","getY","getHeight","Tile","setImg","loaded","defaultName","defaults","Tileset","tiles","assetManager","retrieveTiles","find","tileset","isLoaded","load"],"sourceRoot":""}